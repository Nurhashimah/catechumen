<div class="tform">
	<H2><%=t('equery.evaluate_course.search')%></H2>

<% form_for @evaluatecoursesearch do |f| %>
  <%= f.error_messages %>
	<table width=100% >
		<% if @searchevaluatecoursetype=='1' || @searchevaluatecoursetype==1 %>
			<%= hidden_field_tag :method,  1 %>
			<tr><td colspan=2><%=t('equery.evaluate_course.search_by')%> :</td></tr>
			
			<% @programme_ids_in_evaluatecourse = EvaluateCourse.all.map(&:course_id).uniq %>
			<% @programme_list = Programme.find(:all, :conditions=> ['id IN (?)',@programme_ids_in_evaluatecourse]) %>
			<tr>
				<td class="leftcol">&nbsp;&nbsp;&nbsp;<%= f.label (t 'student.course_id') %></td>
				<td><%= f.collection_select :programme_id, @programme_list, :id, :programme_list, :include_blank=> (t 'select') %></td>
			</tr>
			<% @subject_ids_in_evaluatecourse = EvaluateCourse.all.map(&:subject_id)%>
			<% @subject_list = Programme.find(:all, :conditions=> ['id IN (?)', @subject_ids_in_evaluatecourse ])%>
			<tr>
				<td class="leftcol">&nbsp;&nbsp;&nbsp;<%= f.label (t 'evaluate_course.subject_id') %></td>
				<td><%=f.collection_select :subject_id, @subject_list, :id, :subject_list, :include_blank => (t 'select') %></td>
			</tr>
			<tr>
				<td class="leftcol">&nbsp;&nbsp;&nbsp;<%= f.label (t 'evaluate_course.evaldate') %></td>
				<td><%= date_select :evaldate, params[:evaldate], :include_blank => true %></td>
			</tr>
			<% @lecturer_ids_in_evaluatecourse = EvaluateCourse.all.map(&:staff_id).uniq %>
			<% @lecturer_list = Staff.find(:all, :conditions => ['id IN (?)',@lecturer_ids_in_evaluatecourse])%>
			<tr>
				<td class="leftcol">&nbsp;&nbsp;&nbsp;<%= f.label (t 'evaluate_course.staff_id') %></td>
				<td><%= f.collection_select :lecturer_id, @lecturer_list, :id, :name, :include_blank => (t 'select') %></td>
			</tr>
		<% end %>
	</table>

  <p><%= f.submit (t 'search') %>&nbsp;<font size=-2><%=t('equery.leaves_all_blank_all_records')%></font></p>
<% end %>

</div>
